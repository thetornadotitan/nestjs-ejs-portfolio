<!doctype html>
<html lang="en" class="preload">
  <head>
    <script>
      (function () {
        const storageKey = 'theme';
        const saved = localStorage.getItem(storageKey);
        const prefersDark =
          window.matchMedia &&
          window.matchMedia('(prefers-color-scheme: dark)').matches;
        const theme = saved ?? (prefersDark ? 'dark' : 'light');
        if (theme === 'dark') document.documentElement.classList.add('dark');
      })();
    </script>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title><%= title ?? 'Portfolio' %></title>

    <script>
      tailwind = { config: { darkMode: 'class' } };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="stylesheet" href="/css/style.css" />
    <%- headCss ?? '' %>
    <script defer src="/js/app.js"></script>
    <%- headJs ?? '' %>
  </head>

  <body
    class="min-h-screen flex flex-col bg-[var(--bg)] text-[var(--text)] transition-colors duration-300"
  >
    <%- include('partials/header', { activePath, siteName }) %>

    <main class="mx-auto w-full max-w-5xl flex-1 px-4 py-8">
      <%- include(page) %>
    </main>

    <footer class="border-t border-[var(--border)] bg-[var(--surface)]">
      <div
        class="mx-auto max-w-5xl px-4 py-2 text-sm sm:text-sm text-[var(--muted)] flex flex-wrap items-center justify-center gap-x-2 gap-y-1"
      >
        <span
          >©
          <%= new Date().getFullYear() %>
          Isaac Hisey</span
        >
        <span aria-hidden="true">·</span>
        <span>Built with NestJS &amp; EJS</span>
        <span aria-hidden="true">·</span>
        <span>@TheTornadoTitan</span>
        <span aria-hidden="true">·</span>
        <span>MIT License</span>
      </div>
    </footer>
  </body>
</html>
